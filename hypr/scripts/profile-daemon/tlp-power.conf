# ───────────────────────────────────────────────
# CORE SETTINGS
TLP_ENABLE=1

# Balance disk cache sync (safe)
DISK_IDLE_SECS_ON_AC=0
DISK_IDLE_SECS_ON_BAT=2

# ───────────────────────────────────────────────
# CPU MANAGEMENT
# Use 'powersave' governor on battery instead of schedutil
CPU_SCALING_GOVERNOR_ON_AC=ondemand
CPU_SCALING_GOVERNOR_ON_BAT=conservative

# Let CPU frequency range expand a bit (avoid lag spikes)
CPU_SCALING_MIN_FREQ_ON_BAT=800000
CPU_SCALING_MAX_FREQ_ON_BAT=2400000

# Keep EPP policy power-focused
CPU_ENERGY_PERF_POLICY_ON_AC=balance_performance
CPU_ENERGY_PERF_POLICY_ON_BAT=power

# Limit turbo
CPU_BOOST_ON_AC=1
CPU_BOOST_ON_BAT=0

# Disable NMI watchdog
NMI_WATCHDOG=0

# Platform profile = low-power on battery
PLATFORM_PROFILE_ON_AC=balanced
PLATFORM_PROFILE_ON_BAT=low-power

# ───────────────────────────────────────────────
# GPU POWER MANAGEMENT
# Lower Intel GPU clocks and boost limits
INTEL_GPU_MIN_FREQ_ON_AC=200
INTEL_GPU_MIN_FREQ_ON_BAT=200
INTEL_GPU_MAX_FREQ_ON_AC=950
INTEL_GPU_MAX_FREQ_ON_BAT=700
INTEL_GPU_BOOST_FREQ_ON_AC=1100
INTEL_GPU_BOOST_FREQ_ON_BAT=800

# ───────────────────────────────────────────────
# SATA / NVMe RUNTIME PM
SATA_LINKPWR_ON_AC="med_power_with_dipm""
SATA_LINKPWR_ON_BAT="med_power_with_dipm"

# Enable AHCI runtime PM (for SSDs)
AHCI_RUNTIME_PM_ON_AC=on
AHCI_RUNTIME_PM_ON_BAT=auto
AHCI_RUNTIME_PM_TIMEOUT=15

# ───────────────────────────────────────────────
# PCIe & DEVICE RUNTIME POWER MANAGEMENT
PCIE_ASPM_ON_AC=default
PCIE_ASPM_ON_BAT=default

RUNTIME_PM_ON_AC=auto
RUNTIME_PM_ON_BAT=auto

# ───────────────────────────────────────────────
# USB AUTOSUSPEND
#USB_AUTOSUSPEND=1
# Optionally exclude keyboard/mouse if they misbehave
#USB_DENYLIST="046d:c077 046d:c534" 

# ───────────────────────────────────────────────
# WIFI & BLUETOOTH
# Enable Wi-Fi power save on battery
WIFI_PWR_ON_AC=off
WIFI_PWR_ON_BAT=off

# Disable radios when on battery (optional)
DEVICES_TO_DISABLE_ON_BAT="bluetooth wwan"
#DEVICES_TO_DISABLE_ON_BAT_NOT_IN_USE="wifi"

# ───────────────────────────────────────────────
# AUDIO POWER SAVE
#SOUND_POWER_SAVE_ON_AC=1
#SOUND_POWER_SAVE_ON_BAT=1
#SOUND_POWER_SAVE_CONTROLLER=Y

# ───────────────────────────────────────────────
# MEMORY SUSPEND MODE
#MEM_SLEEP_ON_BAT=deep

# ───────────────────────────────────────────────
# BATTERY THRESHOLDS (keep as-is, good longevity)
START_CHARGE_THRESH_BAT0=70
STOP_CHARGE_THRESH_BAT0=75
START_CHARGE_THRESH_BAT1=70
STOP_CHARGE_THRESH_BAT1=75

